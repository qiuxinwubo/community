<?xml version="1.0" encoding="UTF-8"?>
<webpage>
	<code>cast_seen_list</code>
	<url>/cast/cast_seen_list</url>
	<datasets>
		<dataset>
			<name>ds1</name>
			<type>1</type>
			<scope>3</scope>
			<pageSize>10</pageSize>
			<pageNoArg>pageNo</pageNoArg>
			<sql>
			<![CDATA[
				select vv.*,vw.last_watch_time,s.up_time from 
			        (select user_id,video_id,max(create_time) as last_watch_time from vms_watched where video_type = 2 and user_id = '$user.id$'  group by user_id,video_id) vw,V_VMS_VIDEO_COUNTPROP vv,vms_cast_info s
			          where vw.video_id = vv.id and s.id=vv.id and s.if_shelves=1 ${1}
			          order by last_watch_time desc
			]]>
			</sql>
			<sqlparts>
				<sqlpart>
					<part>${1}</part>
					<type>1</type>
					<arg>headline</arg>
					<defaultValue></defaultValue>
					<options>
						<option>
							<code>null</code>
							<value></value>
						</option>
						<option>
							<code>not null</code>
							<value> and vv.name like ? </value>
						</option>
					</options>
				</sqlpart>
			</sqlparts>
			<vars>	
				<var>
					<argName>headline</argName>
					<type>1</type>
					<prefix>%</prefix>
					<suffix>%</suffix>
				</var>
			</vars>
			<transcodes>
				<transcode>
					<code>service_type</code>
					<type>2</type>
					<transcode>select service_type_name from VMS_DIC_SERVICE_TYPE  where service_type_code='$service_type$'</transcode>
				</transcode>
			</transcodes>
		</dataset>
	</datasets>
</webpage>